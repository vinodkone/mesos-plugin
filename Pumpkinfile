resource "src-git": {
  type: "git"
  param url: "$(context.git.url)"
  param revision: "$(context.git.commit)"
}

task "test": {
  inputs: ["src-git"]

  steps: [
    {
      name: "test"
      image: "maven:3.6.2-jdk-8"
      command: [ "mvn", "package" ]
      workingDir: "/workspace/src-git"
    }
  ]
}

actions: [
  {
    tasks: ["test"]
    on push branches: ["master", "vinod/pumpkin"]
  },
  {
    tasks: ["test"]
    on pull_request chatops: ["test"]
  }
]
